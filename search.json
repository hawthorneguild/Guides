---
layout: null
permalink: /search.json
---
[
  {% assign search_docs = site.pages | concat: site.posts %}
  
  {% for collection in site.collections %}
    {% if collection.label != 'posts' %}
      {% assign search_docs = search_docs | concat: collection.docs %}
    {% endif %}
  {% endfor %}

  {% for doc in search_docs %}
    {% if doc.content and doc.url != "/404.html" and doc.exclude_from_search != true %}
      {
        "title": {{ doc.title | strip_html | strip_newlines | replace: '\', '\\' | replace: '"', '\"' | jsonify }},
        "url": "{{ doc.url | absolute_url | xml_escape }}",
        "date": "{{ doc.date | date: "%Y-%m-%d" }}",
        "content": {{ doc.content | strip_html | strip_newlines | replace: '\', '\\' | replace: '"', '\"' | jsonify }}
      }
      {% unless forloop.last %},{% endunless %}
    {% endif %}
  {% endfor %}
]